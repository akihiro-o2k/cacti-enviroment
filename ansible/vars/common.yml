---

- server_os: 'Ubuntu 20.04'
- user_list:
  - { u_name: visualize, groups: 'lxd,sudo', pass: Visualize0033#, shell: /bin/bash, home: /home/visualize }

- native_packages:
  - snmp
  - snmpd
  - rrdtool
  - libmysql++-dev
  - libsnmp-dev
  - help2man
  - dos2unix
  - autoconf
  - dh-autoreconf
  - libssl-dev
  - librrds-perl
  - snmp-mibs-downloader
  - software-properties-common
- php_packages:
  - php8.1
  - libapache2-mod-php8.1
  - php8.1-cli
  - php8.1-snmp
  - php8.1-mysql
  - php8.1-mbstring
  - php8.1-gd
  - php8.1-xml
  - php8.1-ldap
  - php8.1-gmp
  - php8.1-intl
  - php8.1-pspell
  - php8.1-memcache

- time_zone: Asia/Tokyo

- php_ini_path: /etc/php/8.1/cli/php.ini
- php_ini_template_path: etc/php/8.1/cli/php.ini.j2
- php_max_execution_time: 300
- php_memory_limit: 256M

# ansible-galaxy mahdi22.mariadb_installのパラメータ
- mariadb_version: "10.8"
- bind-address: '127.0.0.1'
- deny_remote_connections: true
- mysql_root_password: "TrustNo1"
- create_database: true
- database: cactidb
- create_db_user: true
- db_user_name: cactiuser
- db_user_password: cactiuser
# 独自改修箇所:ミラーサイトとバージョンを同一URIで変数渡し
#
# 2022.08.16 国内ミラーサイト山形大学からUbuntu20.04向けのmariadb10.8が消失した為、既存のansibleが以下のエラーでスタック。
# ->ERROR-msg: "Failed to update apt cache: E:The repository 'https://ftp.yz.yamagata-u.ac.jp/pub/dbms/mariadb/repo/10.8/ubuntu focal Release' does not have a Release file."
# 上述の事象を避ける為、ファイルが存在するUSのミラーサイトを際指定するが、再発した際はmariadb公式サイトでファイルが存在するミラーを検索してmariadb_repoを書き換えが必要となる。
# mariadb公式サイト(ミラーサイト検索):https://mariadb.org/download/?t=repo-config&d=20.04+%22focal%22&v=10.8&r_m=knownhost
- mariadb_repo: 'deb https://atl.mirrors.knownhost.com/mariadb/repo/10.8/ubuntu'
- innodb_buffer_pool_size: '1G'
- import_sql_file: true
- sql_file_name:
  - { db: 'cactidb', file: '01_criate_cacti_tables.sql' }
  - { db: 'mysql', file: '02_insert_mysql_data_timezone.sql' }
  - { db: 'mysql ', file: '03_grant_select_parmission.sql' }

# cacti公式サイトより、バージョン指定でtarファイルをDL
- cacti_download_url: 'https://files.cacti.net/cacti/linux/cacti-1.2.21.tar.gz'
- cacti_unarchive_path: /var/www/cacti-1.2.21
- cacti_root_path: /var/www/cacti
